<?xml version="1.0" encoding="utf-8"?>
<odoo>


    <!--is.nature.travaux -->
    <record id="is_nature_travaux_form_view" model="ir.ui.view">
        <field name="name">is_nature_travaux_from_view</field>
        <field name="model">is.nature.travaux</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="name" />
                            <field name="color" required="True" widget="color_picker"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    <record model="ir.ui.view" id="is_nature_travaux_tree_view">
        <field name="name">is_nature_travaux_tree_view</field>
        <field name="model">is.nature.travaux</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" />
                <field name="color" required="True" widget="color_picker"/>
            </tree>
        </field>
    </record>
    <record id="is_nature_travaux_search_view" model="ir.ui.view">
        <field name="name">is_nature_travaux_search_view</field>
        <field name="model">is.nature.travaux</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" />
            </search>
        </field>
    </record>
    <record id="is_nature_travaux_action" model="ir.actions.act_window">
        <field name="name">Nature des travaux</field>
        <field name="res_model">is.nature.travaux</field>
        <field name="view_mode">tree,form</field>
    </record>


    <!--is.type.travaux -->
    <record id="is_type_travaux_form_view" model="ir.ui.view">
        <field name="name">is_type_travaux_from_view</field>
        <field name="model">is.type.travaux</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="color" required="True" widget="color_picker"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    <record model="ir.ui.view" id="is_type_travaux_tree_view">
        <field name="name">is_type_travaux_tree_view</field>
        <field name="model">is.type.travaux</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="color" required="True" widget="color_picker"/>
            </tree>
        </field>
    </record>
    <record id="is_type_travaux_search_view" model="ir.ui.view">
        <field name="name">is_type_travaux_search_view</field>
        <field name="model">is.type.travaux</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" />
            </search>
        </field>
    </record>
    <record id="is_type_travaux_action" model="ir.actions.act_window">
        <field name="name">Type des travaux</field>
        <field name="res_model">is.type.travaux</field>
        <field name="view_mode">tree,form</field>
    </record>


    <!--is.specificite -->
    <record id="is_specificite_form_view" model="ir.ui.view">
        <field name="name">is_specificite_from_view</field>
        <field name="model">is.specificite</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="name" />
                            <field name="color" required="True" widget="color_picker"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    <record model="ir.ui.view" id="is_specificite_tree_view">
        <field name="name">is_specificite_tree_view</field>
        <field name="model">is.specificite</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="color" required="True" widget="color_picker"/>
            </tree>
        </field>
    </record>
    <record id="is_specificite_search_view" model="ir.ui.view">
        <field name="name">is_specificite_search_view</field>
        <field name="model">is.specificite</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" />
            </search>
        </field>
    </record>
    <record id="is_specificite_action" model="ir.actions.act_window">
        <field name="name">Spécificités</field>
        <field name="res_model">is.specificite</field>
        <field name="view_mode">tree,form</field>
    </record>



    <!--is.affaire.analyse -->
    <record id="is_affaire_analyse_form_view" model="ir.ui.view">
        <field name="name">is_affaire_analyse_from_view</field>
        <field name="model">is.affaire.analyse</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="affaire_id"/>
                            <field name="intitule"/>
                            <field name="fournisseur_id"/>
                            <field name="famille_id"/>
                            <field name="montant_cde"/>
                            <field name="montant_fac"/>
                            <field name="ecart"/>
                            <field name="ecart_pourcent"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    <record model="ir.ui.view" id="is_affaire_analyse_tree_view">
        <field name="name">is_affaire_analyse_tree_view</field>
        <field name="model">is.affaire.analyse</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree default_order="montant_cde desc">
                <field name="intitule"/>
                <field name="fournisseur_id" optional="hide"/>
                <field name="famille_id"     optional="hide"/>
                <field name="budget"      sum="Total"/>
                <field name="montant_cde" sum="Total"/>
                <field name="montant_fac" sum="Total"/>
                <field name="ecart"       sum="Total"/>
                <field name="ecart_pourcent"/>
                <field name="ecart_budget_cde" sum="Total"/>
                <field name="ecart_budget_fac" sum="Total"/>
            </tree>
        </field>
    </record>
    <record id="is_affaire_analyse_search_view" model="ir.ui.view">
        <field name="name">is_affaire_analyse_search_view</field>
        <field name="model">is.affaire.analyse</field>
        <field name="arch" type="xml">
            <search>
                <field name="intitule" />
                <field name="fournisseur_id" />
                <field name="famille_id"/>
            </search>
        </field>
    </record>


    <record id="is_affaire_analyse_action_pivot" model="ir.ui.view">
         <field name="name">is_affaire_analyse_action_pivot</field>
        <field name="model">is.affaire.analyse</field>
         <field name="arch" type="xml">
             <pivot string="pivot" sample="1">
                 <field name="intitule" type="row"/>
                 <field name="montant_cde" type="measure"/>
                 <field name="montant_fac" type="measure"/>
                 <field name="ecart" type="measure"/>
             </pivot>
         </field>
    </record>

    <record id="is_affaire_analyse_action_graph" model="ir.ui.view">
         <field name="name">is_affaire_analyse_action_graph</field>
        <field name="model">is.affaire.analyse</field>
         <field name="arch" type="xml">
             <graph string="graph" type="bar" order="desc" sample="1">
                 <field name="intitule"/>
                 <field name="montant_cde" type="measure"/>
                 <field name="montant_fac" type="measure"/>
             </graph>
         </field>
    </record>

    <record id="is_affaire_analyse_action" model="ir.actions.act_window">
        <field name="name">Analyse par fournisseur</field>
        <field name="res_model">is.affaire.analyse</field>
        <field name="view_mode">tree,form,pivot,graph</field>
    </record>







    <!--is.affaire -->
    <record id="is_affaire_form_view" model="ir.ui.view">
        <field name="name">is_affaire_from_view</field>
        <field name="model">is.affaire</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button
                        name="analyse_par_fournisseur_action"
                        type="object"
                        string="Analyse par fournisseur"
                    />
                    <button
                        name="analyse_par_famille_action"
                        type="object"
                        string="Analyse par famille"
                    />
                </header>
                <sheet>
                    <style>
                        .o_form_label{
                            white-space: nowrap;
                        }
                    </style>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" name="liste_achat_facture_action" type="object" icon="fa-bars">
                            <div class="o_stat_info">
                                <span class="o_stat_value">
                                    <field name="achat_facture"/>
                                </span>
                                <span class="o_stat_text">Achats</span>
                            </div>
                        </button>
                        <button class="oe_stat_button" name="liste_vente_facture_action" type="object" icon="fa-bars">
                            <div class="o_stat_info">
                                <span class="o_stat_value">
                                    <field name="vente_facture"/>
                                </span>
                                <span class="o_stat_text">Ventes</span>
                            </div>
                        </button>
                    </div>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="nom"/>
                            <field name="client_id"   widget="res_partner_many2one" context="{'res_partner_search_mode': 'customer', 'show_address': 1, 'show_vat': True}" options="{&quot;always_reload&quot;: True}"/>
                            <!-- <field name="chantier_id" widget="res_partner_many2one" context="{'res_partner_search_mode': 'customer', 'show_address': 1, 'show_vat': True}" options="{&quot;always_reload&quot;: True}"/> -->
                            <span class="o_form_label o_td_label" name="address_name"><b>Adresse du chantier</b></span>
                            <div class="o_address_format">
                                <field name="street"  placeholder="Rue"         class="o_address_street"/>
                                <field name="street2" placeholder="Rue 2"       class="o_address_street"/>
                                <field name="zip"     placeholder="Code postal" class="o_address_street"/>
                                <field name="city"    placeholder="Ville"       class="o_address_street"/>
                            </div>
                        </group>
                        <group>
                            <field name="date_creation"/>
                            <field name="contact_chantier_id"/>
                        </group>
                    </group>
                    <group>
                        <field name="nature_travaux_ids" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
                        <field name="type_travaux_ids"   widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
                        <field name="specificite_ids"    widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
                        <field name="commentaire"/>
                    </group>

                    <notebook>
                        <page string="Facturation">
                            <group>
                                <field name="compte_prorata"   readonly="1"/>
                                <field name="retenue_garantie" readonly="1"/>
                            </group>

                            <field name="remise_ids" nolabel="1">
                                <tree editable="bottom">
                                    <field name="product_id"/>
                                    <field name="remise"/>
                                </tree>
                            </field>



                        </page>
                        <page string="Budget">
                            <field name="budget_famille_ids" nolabel="1">
                                <tree editable="bottom">
                                    <field name="famille_id"/>
                                    <field name="budget" sum="Total"/>
                                </tree>
                            </field>
                            <button
                                name="ajout_famille_action"
                                type="object"
                                string="Ajout de toutes les familles"
                                attrs="{'invisible': [('budget_famille_ids', '!=', [])]}"
                            />
                            <button
                                name="import_budget_famille_action"
                                type="object"
                                string="Importation des budgets des commandes client"
                            />
                            <group>
                                <field name="active"/>
                            </group>
                        </page>
                        <page string="Salaires">
                            <field name="salaire_ids" nolabel="1">
                                <tree editable="bottom">
                                    <field name="date"/>
                                    <field name="montant" sum="Total"/>
                                </tree>
                            </field>
                            <group>
                                <field name="montant_salaire"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>


            </form>
        </field>
    </record>
    <record model="ir.ui.view" id="is_affaire_tree_view">
        <field name="name">is_affaire_tree_view</field>
        <field name="model">is.affaire</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree>
                <field name="display_name"        optional="hide" class="white_space_normal" string="Nom complet" />
                <field name="name"                optional="show"/>
                <field name="nom"                 optional="show" class="white_space_normal"/>
                <field name="date_creation"       optional="show"/>
                <field name="contact_chantier_id" optional="hide"/>
                <field name="client_id"           optional="show"/>
                <field name="adresse_chantier"    optional="show"/>
                <!-- <field name="chantier_id"         optional="show"/> -->
                <!-- <field name="chantier_adresse"    optional="hide"/> -->
                <field name="nature_travaux_ids"  optional="show" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
                <field name="type_travaux_ids"    optional="show" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
                <field name="specificite_ids"     optional="show" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
                <field name="commentaire"         optional="show"/>
                <field name="achat_facture"       optional="show" sum="Total"/>
                <field name="vente_facture"       optional="show" sum="Total"/>
                <field name="montant_salaire"     optional="show" sum="Total"/>
            </tree>
        </field>
    </record>
    <record id="is_affaire_search_view" model="ir.ui.view">
        <field name="name">is_affaire_search_view</field>
        <field name="model">is.affaire</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="nom"/>
                <field name="client_id"/>
                <field name="adresse_chantier"/>
                <!-- <field name="chantier_adresse"/> -->
                <field name="nature_travaux_ids"/>
                <field name="type_travaux_ids"/>
                <field name="specificite_ids"/>
                <field name="commentaire"/>
                <field name="contact_chantier_id"/>
            </search>
        </field>
    </record>
    <record id="is_affaire_action" model="ir.actions.act_window">
        <field name="name">Affaires</field>
        <field name="res_model">is.affaire</field>
        <field name="view_mode">tree,form,activity</field>
    </record>






    <!--is.import.salaire -->
    <record id="is_import_salaire_form_view" model="ir.ui.view">
        <field name="name">is_import_salaire_from_view</field>
        <field name="model">is.import.salaire</field>
        <field name="arch" type="xml">
            <form>
                <style>
                    .o_form_label{
                        white-space: nowrap;
                    }
                </style>

                <header>
                    <button
                        name="importation_salaire_action"
                        type="object"
                        string="Importation des salaires dans les affaires"
                    />
                </header>
                <sheet>
                    <group>
                        <field name="name" />
                        <field name="total" attrs="{'invisible': [('total', '==', 0)]}"/>
                        <field name="importation"/>
                    </group>

                    <group string="Résultat importation" attrs="{'invisible':[('resultat','=',False)]}" >
                        <div style="background:gainsboro;font-weight:normal;padding-left:5pt;font-family:courier, courier new, serif;">
                            <field name="resultat" nolabel="1"/>
                        </div>
                    </group>

                    <field name="salaire_ids" nolabel="1">
                        <tree limit="500" readonly="1">
                            <button name="view_affaire_action" type="object" icon="fa-search-plus" title="Voir affaire"/>
                            <field name="affaire_id"/>
                            <field name="date"/>
                            <field name="montant" sum="Total"/>
                        </tree>
                    </field>


                </sheet>
            </form>
        </field>
    </record>
    <record model="ir.ui.view" id="is_import_salaire_tree_view">
        <field name="name">is_import_salaire_tree_view</field>
        <field name="model">is.import.salaire</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" />
                <field name="total" sum="Total" />
            </tree>
        </field>
    </record>
    <record id="is_import_salaire_search_view" model="ir.ui.view">
        <field name="name">is_import_salaire_search_view</field>
        <field name="model">is.import.salaire</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" />
            </search>
        </field>
    </record>
    <record id="is_import_salaire_action" model="ir.actions.act_window">
        <field name="name">Importation des salaires dans les affaires</field>
        <field name="res_model">is.import.salaire</field>
        <field name="view_mode">tree,form</field>
    </record>




</odoo>
