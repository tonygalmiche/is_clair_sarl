<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- account.move -->
    <record id="is_view_move_form" model="ir.ui.view">
        <field name="name">is_view_move_form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet[1]" position="inside">
                <style>
                    .o_form_view .o_form_sheet_bg > .o_form_sheet{
                        max-width: 1800px;
                    }
                    .o_form_label{
                        white-space: nowrap;
                    }
                    .modal-lg, .modal-xl {
                        max-width: 1400px;
                    }
                </style>
            </xpath>

            <field name="payment_reference" position="after">
                <field name="is_order_id"   attrs="{'invisible': [('move_type', 'in', ['in_invoice','in_refund'])]}"/>
                <field name="is_affaire_id" attrs="{'invisible': [('move_type', 'in', ['in_invoice','in_refund'])]}"/>
                <field name="is_banque_id"  attrs="{'invisible': [('is_banque_id', '=', False)]}"/>
            </field>

            <xpath expr="//page[@id='invoice_tab']/field[@name='invoice_line_ids']/tree/field[@name='quantity']" position="before">
                <field name="is_sale_line_id"        optional="hide"/>
                <field name="is_qt_commande"         optional="hide"/>
                <field name="is_facturable_pourcent" optional="hide"/>
                <field name="is_a_facturer"          optional="hide" sum="Total"/>
            </xpath>


            <xpath expr="//page[@id='invoice_tab']/field[@name='invoice_line_ids']/tree/field[@name='analytic_tag_ids']" position="after">
                <field name="is_affaire_id" optional="hide"/>
            </xpath>
            <xpath expr="//page[@id='aml_tab']/field[@name='line_ids']/tree/field[@name='name']" position="after">
                <field name="is_affaire_id" optional="hide"/>
            </xpath>


            <label for="invoice_payment_term_id" position="replace"/>
            <xpath expr="//field[@name='invoice_date_due']/.." position="replace">
                <field name="invoice_payment_term_id"/>
                <field name="invoice_date_due"/>
            </xpath>


            <xpath expr="//field[@name='invoice_line_ids']/tree" position="attributes">
                <attribute name="limit">1000</attribute>
            </xpath>


        </field>
    </record> 
    <record id="is_view_out_invoice_tree" model="ir.ui.view">
        <field name="name">is_view_out_invoice_tree</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_out_invoice_tree" />
        <field name="arch" type="xml">
            <field name="invoice_date_due" position="before">
                <field name="invoice_payment_term_id" optional="show"/>
                <field name="invoice_date_due"        optional="show"/>
            </field>
        </field>
    </record>
    <record id="is_view_in_invoice_tree" model="ir.ui.view">
        <field name="name">is_view_in_invoice_tree</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_in_invoice_tree" />
        <field name="arch" type="xml">
            <field name="invoice_date_due" position="before">
                <field name="invoice_payment_term_id" optional="show"/>
                <field name="invoice_date_due"        optional="show"/>
            </field>
        </field>
    </record>



    <!-- account.move.line -->

    <record id="is_account_move_line_form_view" model="ir.ui.view">
        <field name="name">is_account_move_line_form_view</field>
        <field name="model">account.move.line</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="move_id" readonly="1"/>
                            <field name="partner_id" readonly="1"/>
                            <field name="product_id" readonly="1"/>
                            <field name="name" readonly="1"/>
                            <field name="is_affaire_id"/>
                            <field name="account_id" readonly="1"/>
                            <field name="quantity" readonly="1"/>
                            <field name="product_uom_category_id" invisible="1"/>
                            <field name="product_uom_id" readonly="1"/>
                            <field name="price_unit" readonly="1"/>
                            <field name="price_subtotal" readonly="1"/>

                            <field name="is_sale_line_id" readonly="1"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    <record model="ir.ui.view" id="is_account_move_line_tree_view">
        <field name="name">is_account_move_line_tree_view</field>
        <field name="model">account.move.line</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree>
                <field name="move_id"/>
                <field name="partner_id"/>
                <field name="product_id"/>
                <field name="name"/>
                <field name="is_affaire_id"/>
                <field name="account_id"/>
                <field name="quantity" sum="Total"/>
                <field name="product_uom_category_id" invisible="1"/>
                <field name="product_uom_id"/>
                <field name="price_unit"/>
                <field name="price_subtotal" sum="Total"/>
            </tree>
        </field>
    </record>
    <record id="is_account_move_line_action" model="ir.actions.act_window">
        <field name="name">Lignes de factures</field>
        <field name="res_model">account.move.line</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="is_clair_sarl.is_account_move_line_tree_view"/>
    </record>
</odoo>
